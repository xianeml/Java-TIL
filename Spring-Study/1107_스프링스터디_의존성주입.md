# Day2

date: 2020년 11월 7일
text: 섹션 5 의존성 주입
모두완료: No

# 미현

- 섹션5

🚗

난 차가 필요하다. 차 공장에 차를 하나 달라고 요청하면 된다. 공장에서 모든걸 만들어서 줄거다.

차를 만들기 위해 필요한 모든 **의존성**을 공장에서 주입해준다. 엔진, 타이어, 시트 등

난 외부 개체에게 건설, 주입을 아웃소싱한거야.

스프링으로 보면 차 공장의 역할은 Object Factory(**configuration.xml**)이 한다.

# 의존성 주입 2가지 방법

- 생성자 주입
- setter 주입
- 어노테이션 사용 오토와이어링

# 생성자주입

1.  의존성 클래스나 인터페이스 정의
2.  주입을 위해 생성자 만들기
    - 멤버변수를 생성자 파라미터에 그대로 갖고오기
3.  컨피그 파일에 의존성 주입 설정하기
    - helper 빈 객체 먼저 생성하고, 주입 받는 빈 객체는 생성자 주입 방식으로 helper 참조

```xml
<bean id="hi" class="com.controller.hi">
	<constructor-arg ref="helper" />
</bean>
```

# 스프링 뒤에서 무슨일이 일어나고 있나

xml 의존성 주입 코드를 우리가 원래 쓰던 코드로 뜯어보면 new 객체생성과 똑같음.

# 기본생성자를 만드는 이유?

기본생성자(no-arg constructor)를 정의하지 않으면 컴파일러는 기본으로 일단 만들어준다. 근데 내가 아무 생성자나 정의해놓으면(인자있는 생성자) 컴파일러는 따로 기본생성자를 만들어주지 않는다.

# Setter 주입

1. 클래스에 주입을 위한 setter 메소드를 만든다.
2. 컨피그 파일에 의존성을 설정한다

   ```xml
   <property name="setter함수 인자에 있는 변수 이름" ref="참조할 bean객체" />
   ```

정확히는 name을 이렇게 set함수 이름에서 따온다.

# 스프링 뒤에서 무슨일이 일어나고 있나

저 세터 주입 코드를 익숙한 코드로 뜯어보면 그냥 참조할 객체로 set 해주는 방식과 같다.

# Setter 주입에 값을 할당하기

value 써서 새로운 값 할당.

set 써서 값 할당했으니까 get함수 호출해서 그 값을 확인할 수 있다.

# 외부 프로퍼티스 파일 읽기

1.  프로퍼티스 파일을 만든다
2.  컨피그 파일에 프로퍼티 파일을 로드한다(context 네임스페이스 필요)

    ```xml
    <context:property-placeholder location="경로" />
    ```

3.  프로퍼티 파일에 있는 값들을 참조한다.

    ```xml
    <property name="userid" value="${프로퍼티 key 이름}" />
    ```

수업 때 했던 jdbc.properties 파일 읽어오는 방법이랑 같다.
